<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <div id="app">
    User1_Cards : {{user1_cards}}<br/>
    User2_Cards : {{user2_cards}}<br/><br/>
    Now winner : {{winner}}<br/>
    Round : {{round}}<br/><br/>
    before user betting chip : user1 - {{before_user1_bet}}, user2 - {{before_user2_bet}}<br/><br/>

    cardNum : user1 - {{user1_rand}}, user2 - {{user2_rand}}<br/>
    <button v-on:click="random">select random cards</button><br/><br/>

    How much will you bet?(1 - 10)<br/>
    input user1 bet chip : <input type="number" placeholder="user1 bet chips" v-model="user1_bet" >
    input user2 bet chip : <input type="number" placeholder="user2 bet chips" v-model="user2_bet" ><br/>
    <button v-on:click="betting">Betting Chips</button><br/><br/>

    user bet : user1 - {{ user1_bet }}, user2 - {{user2_bet}}<br/><br/>
    
    <button v-on:click="betting_res">Betting Result</button><br/>
    User Chips : user1 - {{user1_chips}}, user2 - {{user2_chips}}<br/><br/>
    
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script>
    new Vue({
      el: '#app',
      data: {
        //card
        user1_cards:[1,2,3,4,5,6,7,8,9,10],
        user2_cards:[1,2,3,4,5,6,7,8,9,10],
        // Initial chips amount
        user1_chips:20,
        user2_chips:20,
        // rancom card
        user1_rand: 1,
        user2_rand: 1,
        // bet chips
        user1_bet: "",
        user2_bet: "",
       
        //if tied, use before bet chips
        before_user1_bet:"",
        before_user2_bet:"",

        // round
        round : 0,

        //The room manager starts the game first. I randomly set user1 to go first.
    //From the second round, Game start with the winner of the previous round.
        winner: "user1"
      },
     
      methods: {
        // random card generating..(1-10) on Back-end, but I've arbitrarily set it up like this.
        random: function() {
            this.round++;
            // used card remove
            this.user1_rand = this.user1_cards.splice(Math.floor(Math.random() * this.user1_cards.length),1)[0];                
            this.user2_rand = this.user2_cards.splice(Math.floor(Math.random() * this.user2_cards.length),1)[0];
            
        },    
        checkChipNum: function(){ // 1-10 betting chip check
            while(this.user1_bet > 10 || this.user1_bet <1){
                this.user1_bet = ("Submit 1-10 Chips.");
            }
            while(this.user2_bet > 10|| this.user2_bet <1){
                this.user2_bet = ("Submit 1-10 Chips.");
            }
                
        },
        betting: function(){        
            if(this.user1_chips > 0 && this.user2_chips > 0){       
                // betting Chips
                // The second person has to pay the same or more than the first person.
                this.checkChipNum();
                if(this.winner == "user1"){
                    if(this.user1_bet > this.user2_bet){    // user2_bet = 10 --> error.. Why..
                        this.user2_bet = ("User2 Chips >= User1 Chips");
                    }
                }
                else{           // user1_bet = 10 --> error..... Why..
                    if(this.user1_bet < this.user2_bet){
                        this.user1_bet = ("User1 Chips >= User2 Chips");
                    }
                }
            }
            /*
            else{
                this.over_message += "winner is "+this.winner;
            }*/
            
        },
        all_in: function(){
            if(this.user1_chips > 0 && this.user2_chips > 0){       
                // betting Chips
                // The second person has to pay the same or more than the first person.
                
                if(this.winner == "user1"){
                    if(this.user1_bet > this.user2_bet){    // user2_bet = 10 --> error.. Why..
                        this.user2_bet = ("User2 Chips >= User1 Chips");
                    }
                }
                else{           // user1_bet = 10 --> error..... Why..
                    if(this.user1_bet < this.user2_bet){
                        this.user1_bet = ("User1 Chips >= User2 Chips");
                    }
                }
            }
            /*
            else{
                this.over_message += "Winner is "+this.winner;
            }*/
        },
        betting_res: function(){       
            if(this.user1_chips > 0 && this.user2_chips > 0){
                if(this.before_user1_bet !=0){
                    this.user1_bet = parseInt(this.user1_bet) + parseInt(this.before_user1_bet);
                    this.user2_bet = parseInt(this.user2_bet) + parseInt(this.before_user2_bet);
                    this.before_user1_bet =0;
                    this.before_user2_bet =0;
                }


                if(this.user1_rand == this.user2_rand){ //to combine it with the betting amount for the next round.
                    this.before_user1_bet = this.user1_bet;
                    this.before_user2_bet = this.user2_bet;
        
                }
                else if(this.user1_rand > this.user2_rand){
                    
                    this.user1_chips = parseInt(this.user1_chips) + parseInt(this.user2_bet);
                    this.user2_chips = parseInt(this.user2_chips) - parseInt(this.user2_bet);
                    this.winner = "user1";
                }
                else{  //(user1_rand < user2_rand)
                    this.user2_chips = parseInt(this.user2_chips) + parseInt(this.user1_bet);
                    this.user1_chips = parseInt(this.user1_chips) - parseInt(this.user1_bet);
                    this.winner = "user2";
                }
            }
        },
        
        logText: function() {
          console.log('changed');
        },
        // Even without a watch, it works well on the test.
        /* watch: {
        user1_chips: function() {
            this.logText();
        },
        user2_chips: function(){
            this.logText();
        },
        user1_rand: function(){
            this.logText();
        },
        user2_rand: function(){
            this.logText();
        },
        user1_bet:function(){
            this.logText();
        },
        user2_bet:function(){
            this.logText();
        },
        winner: function(){
            this.logText();
        },
        round: function(){
            this.logText();
        },
        cards: function(){
            thi.logText();
        }
       
      },*/

      }
    })
  </script>
</body>
</html>


<br/><br/><br/><br/>
TO-DO<br/>
Used Card Not Reusable..                             ----------> solved<br/>
Small errors need to be corrected. (Somtimes... betting, if tied.. )<br/>
betting, betting_res : For else, need to be on screen         ----------> solved..(?)<br/>
Apply loop statement to game <br/>
add ALL-In CASE              <br/>
add win, lose, tied case
align with Front-end <br/>
add 'end game' Function                              --> when align front-end<br/>
Implement in detail in function<br/>


